---
jupyter:
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
  language_info:
    codemirror_mode:
      name: ipython
      version: 3
    file_extension: .py
    mimetype: text/x-python
    name: python
    nbconvert_exporter: python
    pygments_lexer: ipython3
    version: 3.11.9
  nbformat: 4
  nbformat_minor: 5
  papermill:
    default_parameters: {}
    duration: 1.863715
    end_time: "2024-06-13T03:44:21.176265"
    environment_variables: {}
    input_path: practice/004.ipynb
    output_path: practice/004.ipynb
    parameters: {}
    start_time: "2024-06-13T03:44:19.312550"
    version: 2.6.0
---

<div id="ff4e246c" class="cell code" execution_count="1"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.477578Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.477170Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.840794Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.840105Z&quot;}"
papermill="{&quot;duration&quot;:0.36854,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.842326&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.473786&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
from typing import List, Optional, Generator
import pandas as pd
import numpy as np
import sqlite3
import re
import io
import math
import collections
import itertools
import functools
import random
import string
import tqdm
import bisect
import heapq

conn = sqlite3.connect(":memory:")

def regexp(expr, item):
    reg = re.compile(expr)
    return reg.search(item) is not None

def read_lc_df(s: str, dtypes: dict[str, str]=dict()) -> pd.DataFrame:
    temp = pd.read_csv(io.StringIO(s), sep="|", skiprows=2)
    temp = temp.iloc[1:-1, 1:-1]
    temp.columns = temp.columns.map(str.strip)
    temp = temp.map(lambda x: x if type(x) != str else None if x.strip() == 'null' else x.strip())
    temp = temp.astype(dtypes)
    return temp

conn.create_function("REGEXP", 2, regexp)
```

</div>

<div id="2e7ac16e" class="cell markdown"
papermill="{&quot;duration&quot;:1.873e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.846430&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.844557&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

#### Helper for Binary tree problems

</div>

<div id="3f0a4700" class="cell code" execution_count="2"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.851233Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.850688Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.857948Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.857490Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:1.0859e-2,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.859032&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.848173&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
class BinaryTreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

    def to_list(self):
        to_visit = [self]
        visited = []
        while len(to_visit) > 0:
            curr = to_visit.pop(0)
            if curr:
                to_visit.append(curr.left)
                to_visit.append(curr.right)
                visited.append(curr.val)
            else:
                visited.append(curr)

        while visited and not visited[-1]:
            visited.pop()

        return visited

    def __str__(self):
        return str(self.val)

    @staticmethod
    def from_array(nums: list[int|None]):
        '''Create a Tree from a list of nums. Returns the root node.'''
        if len(nums) == 0:
            return None
        elif len(nums) == 1:
            return BinaryTreeNode(nums[0])
        else:
            forest = [BinaryTreeNode(nums[0])]
            parent_idx = -1
            for i in range(1, len(nums)):

                curr = None
                if nums[i] is not None:
                    curr = BinaryTreeNode(nums[i])
                    forest.append(curr)

                if i % 2 == 1:
                    parent_idx += 1
                    forest[parent_idx].left = curr
                else:
                    forest[parent_idx].right = curr

        return forest[0]
```

</div>

<div id="db1734cd" class="cell markdown"
papermill="{&quot;duration&quot;:1.828e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.862736&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.860908&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

#### Helper for Singly Linked lists

</div>

<div id="8492ea44" class="cell code" execution_count="3"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.867110Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.866931Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.871215Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.870797Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:7.735e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.872272&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.864537&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
class ListNode:
    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next

    def __str__(self):
        return str(self.val)

    @staticmethod
    def to_singly_linked_list(nums: list[int]):
        root = prev = None
        for n in nums:
            curr = ListNode(n)
            # Init once
            if not root:
                root = curr
            if prev:
                prev.next = curr
            prev = curr

        return root

    def to_list(self) -> list[int]:
        result = []
        curr = self
        while curr:
            result.append(curr.val)
            curr = curr.next
        return result
```

</div>

<div id="4299ad4a" class="cell markdown"
papermill="{&quot;duration&quot;:1.789e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.875899&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.874110&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

#### Utility to generate random BST

</div>

<div id="0882390e" class="cell code" execution_count="4"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.881675Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.881176Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.885664Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.885240Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:8.944e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.886689&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.877745&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
def generateBST(N: int, min_: int, max_: int) -> BinaryTreeNode|None:
    def insert(curr: BinaryTreeNode|None, n: int) -> BinaryTreeNode:
        if not curr:
            curr = BinaryTreeNode(n)
        elif curr.val < n:
            curr.right = insert(curr.right, n)
        else:
            curr.left = insert(curr.left, n)

        return curr

    assert N <= max_ - min_, "Number of available samples must be >= N"
    root: BinaryTreeNode|None = None
    for n in np.random.choice(np.arange(min_, max_), size=N, replace=False):
        root = insert(root, n)

    return root
```

</div>

<div id="d111cefb" class="cell markdown"
papermill="{&quot;duration&quot;:1.828e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.890454&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.888626&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

LC Medium: Longest Substring with atleast K repeating characters

</div>

<div id="bdbcc4a8" class="cell code" execution_count="5"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.895358Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.894905Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.899921Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.899471Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:8.684e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.901071&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.892387&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
# https://leetcode.com/problems/longest-substring-with-at-least-k-repeating-characters/
# https://leetcode.com/problems/longest-substring-with-at-least-k-repeating-characters/submissions/1286506890
def longestSubstring(s: str, k: int) -> int:
    """
    Count the freq of all characters, split on the characters with freq < k
    """
    N = len(s)

    # Count the freq
    freq: collections.Counter = collections.Counter(s)
    is_valid = not any(map(lambda x: x < k, freq.values()))

    # If the entire string is okay, return length as answer
    if is_valid:
        return N

    # Split on the invalid characters and backtrack inside
    else:
        max_length = start_idx = 0
        for curr_idx in range(N):
            if 0 < freq[s[curr_idx]] < k:
                max_length = max(max_length, longestSubstring(s[start_idx:curr_idx], k))
                start_idx = curr_idx + 1

        max_length = max(max_length, longestSubstring(s[start_idx:], k))
        return max_length

# Tesitng the solution
assert longestSubstring("aaabb", 3) == 3
assert longestSubstring("ababbc", 2) == 5
assert longestSubstring("bbaaa", 3) == 3
```

</div>

<div id="ff630a5c" class="cell markdown"
papermill="{&quot;duration&quot;:1.979e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.904934&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.902955&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

LC Virtual - 4: Weekly Contest 5
<https://leetcode.com/contest/leetcode-weekly-contest-5/>

</div>

<div id="186e9992" class="cell code" execution_count="6"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.909875Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.909398Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.915124Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.914690Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:9.357e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.916162&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.906805&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
# Q4: Frog Jump
def canCrossRecursive(stones: list[int]) -> bool:
    @functools.cache
    def backtrack(n: int, jump: int) -> bool:
        if jump < 0:
            return False
        elif n == stones[-1]:
            return True
        else:
            if n + jump - 1 in positions and backtrack(n + jump - 1, jump - 1):
                return True
            elif jump > 0 and n + jump in positions and backtrack(n + jump, jump):
                return True
            elif n + jump + 1 in positions and backtrack(n + jump + 1, jump + 1):
                return True
            else:
                return False

    N = len(stones)
    positions: dict[int, int] = {n: i for i, n in enumerate(stones)}
    return len(stones) <= 1 or backtrack(stones[0], 0)

# Testing the solution
assert canCrossRecursive([0,1,3,5,6,8,12,17]) == True
assert canCrossRecursive([0,1,2,3,4,8,9,11]) == False
assert canCrossRecursive([]) == True
assert canCrossRecursive([100]) == True
assert canCrossRecursive([0,2]) == False
```

</div>

<div id="14bb91a7" class="cell code" execution_count="7"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.920942Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.920479Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.926936Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.926399Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:9.839e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.927931&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.918092&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
def canCrossTabulation(stones: list[int]) -> bool:
    N = len(stones)
    positions: dict[int, int] = {n: i for i, n in enumerate(stones)}
    dp: list[list[bool]] = [[False if stones[i] != stones[-1] else True for jump in range(N + 2)] for i in range(N)]
    for i in range(N - 2, -1, -1):
        for jump in range(N):
            n = stones[i]
            if n + jump - 1 in positions:
                dp[i][jump] = dp[i][jump] or dp[positions[n + jump - 1]][jump - 1]
            if jump > 0 and n + jump in positions:
                dp[i][jump] = dp[i][jump] or dp[positions[n + jump]][jump]
            if n + jump + 1 in positions:
                dp[i][jump] = dp[i][jump] or dp[positions[n + jump + 1]][jump + 1]

    return len(stones) <= 1 or dp[0][0]

# Testing the solution
assert canCrossTabulation([0,1,3,5,6,8,12,17]) == True
assert canCrossTabulation([0,1,2,3,4,8,9,11]) == False
assert canCrossTabulation([]) == True
assert canCrossTabulation([100]) == True
assert canCrossTabulation([0,2]) == False
```

</div>

<div id="a756a694" class="cell code" execution_count="8"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.933090Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.932626Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.935193Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.934785Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:6.261e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.936266&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.930005&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
# Q3: Remove K digits
def removeKdigits(num: str, k: int) -> str:
    pass
```

</div>

<div id="258ef565" class="cell code" execution_count="9"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.941389Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.940906Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.945687Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.945156Z&quot;}"
lines_to_next_cell="1"
papermill="{&quot;duration&quot;:8.525e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.946804&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.938279&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
# Q1: Find Nth Digit
def findNthDigit(N: int) -> int:
    def countDigitsBefore(n: int) -> int:
        if n < 10:
            return n
        else:
            n_digits = math.floor(math.log10(n)) + 1
            smallest_n_digit_number = 10 ** (n_digits - 1)
            n_digits_before = (n - smallest_n_digit_number + 1) * n_digits
            return n_digits_before + countDigitsBefore(smallest_n_digit_number - 1)

    # Binary search
    low, high = 1, N
    while low <= high:
        mid = (low + high) // 2
        count = countDigitsBefore(mid)
        if count == N:
            return mid % 10
        elif count < N:
            low = mid + 1
        else:
            high = mid - 1

    delta = countDigitsBefore(low) - N
    return int(str(low)[-delta-1])

# Testing the solution
assert findNthDigit(11) == 0
assert findNthDigit(3) == 3
```

</div>

<div id="76b61cf9" class="cell code" execution_count="10"
execution="{&quot;iopub.execute_input&quot;:&quot;2024-06-13T03:44:20.952176Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-06-13T03:44:20.951734Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-06-13T03:44:20.957035Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-06-13T03:44:20.956604Z&quot;}"
papermill="{&quot;duration&quot;:9.131e-3,&quot;end_time&quot;:&quot;2024-06-13T03:44:20.958060&quot;,&quot;exception&quot;:false,&quot;start_time&quot;:&quot;2024-06-13T03:44:20.948929&quot;,&quot;status&quot;:&quot;completed&quot;}"
tags="[]">

``` python
# Q2: Binary Watch
def readBinaryWatch(turnedOn: int) -> set[str]:
    watch: list[bool] = [False for i in range(10)]
    result: set[str] = set()
    def backtrack(lights: int) -> None:
        if lights == 0:
            hour = minute = 0
            for i in range(10):
                if watch[i]:
                    if i < 4:
                        hour += 2 ** (3 - i)
                    else:
                        minute += 2 ** (9 - i)

            if 0 <= hour < 12 and 0 <= minute <= 59:
                result.add(f"{hour}:{str(minute).zfill(2)}")

        else:
            for i in range(10):
                if not watch[i]:
                    watch[i] = True
                    backtrack(lights - 1)
                    watch[i] = False

    backtrack(turnedOn)
    return result

# Testing the solution
assert sorted(readBinaryWatch(1)) == sorted(["0:01","0:02","0:04","0:08","0:16","0:32","1:00","2:00","4:00","8:00"])
```

</div>
